<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vive la 974DR ‚Äî Calcul mental</title>

  <!-- Ic√¥ne & PWA -->
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0e0f12">

  <style>
    :root{
      --bg:#0e0f12; --card:#171a21; --text:#e8ecf1; --muted:#aab3bd;
      --accent:#ffd166; --ok:#34d399; --bad:#f87171; --border:rgba(255,255,255,.1);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background: radial-gradient(1200px 800px at 10% -10%, #1a232f 0%, var(--bg) 55%) fixed;
    }
    .wrap{max-width:980px;margin:28px auto 64px;padding:0 16px}
    header{display:flex;align-items:center;gap:14px;margin-bottom:18px}
    header .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#4aa7ff,#9b72ff);display:grid;place-items:center}
    header .logo span{font-weight:800;color:white;font-size:20px}
    h1{margin:0;font-size:clamp(22px,4vw,34px)}
    .sub{color:var(--muted);font-size:14px}

    .banner{background:linear-gradient(135deg,#4aa7ff,#8dd0ff);color:#03111f;font-weight:bold;
      padding:8px 14px;border-radius:10px;margin-bottom:16px;text-align:center}

    .card{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:14px;padding:16px}
    .grid{display:grid;grid-template-columns:1.1fr 1fr;gap:16px}
    @media (max-width:850px){.grid{grid-template-columns:1fr}}
    .row{display:flex;flex-wrap:wrap;gap:10px;align-items:center}
    label{font-size:14px;color:var(--muted)}
    .chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);border-radius:10px;padding:8px 10px;background:#0f1218}
    .tables{display:grid;grid-template-columns:repeat(6,minmax(0,1fr));gap:8px;margin-top:6px}
    @media (max-width:520px){.tables{grid-template-columns:repeat(3,minmax(0,1fr))}}
    input[type="number"]{background:#0f1218;border:1px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text);width:90px}
    input[type="checkbox"],input[type="radio"]{transform:scale(1.1)}
    button{
      appearance:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer;
      background:linear-gradient(135deg,#4aa7ff,#8dd0ff);color:#03111f
    }
    button.secondary{background:transparent;color:var(--text);border:1px solid var(--border)}
    button.ghost{background:transparent;color:var(--muted)}
    button:disabled{opacity:.6;cursor:not-allowed}
    .question{font-size:clamp(28px,6vw,56px);font-weight:800;text-align:center;margin:10px 0 6px}
    .question .op{color:var(--accent)}
    .input-line{display:flex;gap:10px;justify-content:center;align-items:center;flex-wrap:wrap}
    .input-line input{font-size:22px;text-align:center;width:180px}
    .status{display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;border-top:1px dashed var(--border);padding-top:10px;margin-top:10px;color:var(--muted)}
    .pill{padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:#0f1218}
    .pill.ok{border-color:rgba(52,211,153,.4);color:#d1fae5}
    .pill.bad{border-color:rgba(248,113,113,.4);color:#fee2e2}
    .feedback{min-height:26px;text-align:center;font-weight:800;margin-top:6px}
    .feedback.ok{color:var(--ok)} .feedback.bad{color:var(--bad)}
    .result{display:none} .result.active{display:block}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"><span>√ó</span></div>
      <div>
        <h1>Vive la 974DR !</h1>
        <div class="sub">Tables de multiplication ‚Äî entra√Ænement ludique (PWA, hors-ligne)</div>
      </div>
    </header>

    <div class="banner">üíô Vive la 974DR ! üíô</div>

    <section class="card">
      <div class="grid">
        <!-- R√©glages -->
        <div>
          <div class="row" style="margin-bottom:8px">
            <span class="chip"><input type="radio" name="mode" value="train" checked> Entra√Ænement</span>
            <span class="chip"><input type="radio" name="mode" value="sprint"> Sprint 60 s</span>
            <span class="chip"><label>Nb questions <input id="numQ" type="number" min="5" max="100" value="20"></label></span>
          </div>

          <div class="row">
            <span class="chip"><input type="checkbox" id="allTables"> <strong>Toutes (2‚Äì11)</strong></span>
          </div>
          <div id="tablesGrid" class="tables" style="margin-bottom:8px"></div>

          <div class="row">
            <span class="chip"><label>Deuxi√®me facteur de
              <input id="minB" type="number" min="0" max="11" value="0"> √†
              <input id="maxB" type="number" min="0" max="11" value="11"></label></span>
            <span class="chip"><input type="checkbox" id="instant" checked> Correction imm√©diate</span>
          </div>

          <div class="row" style="margin-top:10px">
            <button id="startBtn">D√©marrer</button>
            <button class="secondary" id="resetBtn">R√©initialiser</button>
          </div>
        </div>

        <!-- Jeu -->
        <div>
          <div id="play" class="card" style="display:none">
            <div class="question"><span id="qa"></span> <span class="op">√ó</span> <span id="qb"></span> <span class="op">=</span> ?</div>
            <div class="input-line">
              <input id="answer" type="number" inputmode="numeric" placeholder="Ta r√©ponse">
              <button id="okBtn">Valider</button>
              <button class="secondary" id="skipBtn">Je ne sais pas</button>
            </div>
            <div id="feedback" class="feedback"></div>
            <div class="status">
              <div class="pill">Q <span id="count">0</span></div>
              <div class="pill ok">‚úîÔ∏é <span id="good">0</span></div>
              <div class="pill bad">‚úñÔ∏é <span id="bad">0</span></div>
              <div class="pill">‚è±Ô∏è <span id="timer">00:00</span></div>
              <div class="pill">üî• S√©rie : <span id="streak">0</span></div>
            </div>
          </div>

          <div id="result" class="result card">
            <h3>R√©sum√©</h3>
            <p>Score : <strong><span id="scorePct">0</span>%</strong> ‚Äî Temps : <strong id="totalTime">00:00</strong> ‚Äî Moyenne : <strong id="tPerQ">‚Äî</strong></p>
            <p class="muted" id="mistakesTitle" style="margin:6px 0 0">Erreurs √† revoir :</p>
            <ul id="mistakes" style="margin:6px 0 0; padding-left:18px"></ul>
            <p class="muted" style="margin-top:10px;text-align:center">üíô Vive la 974DR ! üíô</p>
            <div class="row"><button id="againBtn">Refaire une session</button></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- JS identique √† la version pr√©c√©dente -->
  <script>
    /* le gros script complet que je t‚Äôai donn√© pr√©c√©demment reste inchang√© ici */
  </script>
</body>
</html>p
